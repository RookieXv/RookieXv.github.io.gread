<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://liuwenxu.com</id>
    <title>Java那些事儿</title>
    <updated>2020-04-27T08:19:43.319Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://liuwenxu.com"/>
    <link rel="self" href="https://liuwenxu.com/atom.xml"/>
    <subtitle>微信公众号：Java那些事儿&lt;br /&gt;&lt;br /&gt;
记录一些&lt;br /&gt;&lt;br /&gt;
编程知识、生活琐碎~</subtitle>
    <logo>https://liuwenxu.com/images/avatar.png</logo>
    <icon>https://liuwenxu.com/favicon.ico</icon>
    <rights>All rights reserved 2020, Java那些事儿</rights>
    <entry>
        <title type="html"><![CDATA[Java中各种时间类型相互转换]]></title>
        <id>https://liuwenxu.com/wAXk-jYoE/</id>
        <link href="https://liuwenxu.com/wAXk-jYoE/">
        </link>
        <updated>2020-04-26T16:38:19.000Z</updated>
        <summary type="html"><![CDATA[<p>😎Java 中时间类 <strong>Instant</strong>、<strong>LocalDateTime</strong>、<strong>LocalDate</strong>、<strong>Calendar</strong>、<strong>Timestamp</strong>、<strong>Date</strong>、<strong>ZonedDateTime</strong>之间相互转换</p>
]]></summary>
        <content type="html"><![CDATA[<p>😎Java 中时间类 <strong>Instant</strong>、<strong>LocalDateTime</strong>、<strong>LocalDate</strong>、<strong>Calendar</strong>、<strong>Timestamp</strong>、<strong>Date</strong>、<strong>ZonedDateTime</strong>之间相互转换</p>
<!-- more -->
<blockquote>
<p>Java中各种时间类型相互转换</p>
</blockquote>
<h1 id="参数声明">参数声明：</h1>
<pre><code class="language-java">  final Date date = new Date();
  final Timestamp timestamp = new Timestamp(date.getTime());
  final Calendar calendar = Calendar.getInstance();
  final Instant instant = Instant.now();
  final LocalDateTime localDateTime = LocalDateTime.now();
  final ZonedDateTime zonedDateTime = ZonedDateTime.now();
  final LocalDate localDate = LocalDate.now();
</code></pre>
<h1 id="转instant">转Instant</h1>
<pre><code class="language-java">    //Date转Instant
    Instant dateInstant = date.toInstant();

    //Timestamp转Instant
    Instant timestampInstant = timestamp.toInstant();

    //Calendar转Instant
    Instant calendarInstant = calendar.toInstant();

    //LocalDateTime转Instant
    Instant localDateTimeInstant = localDateTime.atZone(ZoneId.systemDefault()).toInstant();

    //ZonedDateTime转Instant
    Instant zonedDateTimeInstant = zonedDateTime.toInstant();

    //LocalDate转Instant
    Instant localDateInstant = localDate.atStartOfDay(ZoneId.systemDefault()).toInstant();
</code></pre>
<h1 id="转localdatetime">转LocalDateTime</h1>
<pre><code class="language-java">    //Date转LocalDateTime
    LocalDateTime dateLocalDateTime = 	     LocalDateTime.ofInstant(date.toInstant(), ZoneId.systemDefault());

    //Timestamp转LocalDateTime
    LocalDateTime timestampLocalDateTime = timestamp.toLocalDateTime();

    //Calendar转LocalDateTime
    LocalDateTime calendarLocalDateTime = LocalDateTime.ofInstant(calendar.toInstant(), ZoneOffset.systemDefault());

    //Instant转LocalDateTime
    LocalDateTime instantLocalDateTime = LocalDateTime.ofInstant(instant, ZoneId.systemDefault());

    //ZonedDateTime转LocalDateTime
    LocalDateTime zonedDateTimeLocalDateTime = zonedDateTime.toLocalDateTime();

    //LocalDate转LocalDateTime
    LocalDateTime localDateLocalDateTime = localDate.atStartOfDay();
</code></pre>
<h1 id="转zoneddatetime">转ZonedDateTime</h1>
<pre><code class="language-java">    //Date转ZonedDateTime
    ZonedDateTime dateZonedDateTime = ZonedDateTime.ofInstant(date.toInstant(), ZoneId.systemDefault());

    //Timestamp转ZonedDateTime
    ZonedDateTime timestampZonedDateTime = ZonedDateTime.ofInstant(timestamp.toInstant(), ZoneId.systemDefault());

    //Calendar转ZonedDateTime
    ZonedDateTime calendarZonedDateTime = ZonedDateTime.ofInstant(calendar.toInstant(), ZoneId.systemDefault());

    //Instant转ZonedDateTime
    ZonedDateTime instantZonedDateTime = instant.atZone(ZoneId.systemDefault());

    //LocalDateTime转ZonedDateTime
    ZonedDateTime localDateTimeZonedDateTime = localDateTime.atZone(ZoneId.systemDefault());

    //LocalDate转ZonedDateTime
    ZonedDateTime localDateZonedDateTime = localDate.atStartOfDay(ZoneId.systemDefault());
</code></pre>
<h1 id="转date">转Date</h1>
<pre><code class="language-java">    //Timestamp转Date
    Date timestampDate = new Date(timestamp.getTime());

    //Calendar转Date
    Date calendarDate = calendar.getTime();

    //Instant转Date
    Date instantDate = Date.from(instant);

    //LocalDateTime转Date
    Date localDateTimeDate = Date.from(localDateTime.atZone(ZoneId.systemDefault()).toInstant());

    //ZonedDateTime转Date
    Date zonedDateTimeDate = Date.from(zonedDateTime.toInstant());

    //LocalDate转Date
    Date localDateDate = Date.from(localDate.atStartOfDay(ZoneId.systemDefault()).toInstant());
</code></pre>
<h1 id="转timestamp">转Timestamp</h1>
<pre><code class="language-java">    //Date转Timestamp
    Timestamp dateTimestamp = new Timestamp(date.getTime());

    //Calendar转Timestamp
    Timestamp calendarTimestamp = new Timestamp(calendar.getTimeInMillis());

    //Instant转Timestamp
    Timestamp instantTimestamp = Timestamp.from(instant);

    //LocalDateTime转Timestamp
    Timestamp localDateTimeTimestamp = Timestamp.valueOf(localDateTime);

    //ZonedDateTime转Timestamp
    Timestamp zonedDateTimeTimestamp = Timestamp.from(zonedDateTime.toInstant());

    //LocalDate转Timestamp
    Timestamp localDateTimestamp = Timestamp.valueOf(localDate.atStartOfDay());
</code></pre>
<h1 id="转calendar">转Calendar</h1>
<pre><code class="language-java">    //Date转Calendar
    Calendar dateCalendar = Calendar.getInstance();
    dateCalendar.setTime(date);

    //Timestamp转Calendar
    Calendar timestampCalendar = Calendar.getInstance();
    timestampCalendar.setTimeInMillis(timestamp.getTime());

    //Instant转Calendar
    Calendar instantCalendar = GregorianCalendar.from(ZonedDateTime.ofInstant(instant, ZoneId.systemDefault()));

    //LocalDateTime转Calendar
    Calendar localDateTimeCalendar = GregorianCalendar.from(ZonedDateTime.of(localDateTime, ZoneId.systemDefault()));

    //ZonedDateTime转Calendar
    Calendar zonedDateTimeInstantCalendar = GregorianCalendar.from(zonedDateTime);

    //LocalDate转Calendar
    Calendar localDateCalendar = GregorianCalendar.from(localDate.atStartOfDay(ZoneId.systemDefault()));
</code></pre>
<h1 id="转localdate">转LocalDate</h1>
<pre><code class="language-java">    //Date转LocalDate
    LocalDate dateLocalDate = LocalDate.ofInstant(date.toInstant(), ZoneId.systemDefault());  //jdk11

    LocalDate dateLocalDate = LocalDateTime.ofInstant(date.toInstant(), ZoneId.systemDefault()).toLocalDate();

    //Timestamp转LocalDate
    LocalDate timestampLocalDate = timestamp.toLocalDateTime().toLocalDate();

    //Calendar转LocalDate
    LocalDate calendarLocalDate = LocalDate.ofInstant(calendar.toInstant(), ZoneOffset.systemDefault());  //jdk11

    LocalDate calendarLocalDate = LocalDateTime.ofInstant(calendar.toInstant(), ZoneOffset.systemDefault()).toLocalDate();

    //Instant转LocalDate
    LocalDate instantLocalDate = LocalDate.ofInstant(instant, ZoneId.systemDefault());  //jdk11

    LocalDate instantLocalDate = LocalDateTime.ofInstant(instant, ZoneId.systemDefault()).toLocalDate();

    //LocalDateTime转LocalDate
    LocalDate localDateTimeLocalDate = localDateTime.toLocalDate();

    //ZonedDateTime转LocalDate
    LocalDate zonedDateTimeLocalDate = zonedDateTime.toLocalDate();
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Java中计算日期时间差]]></title>
        <id>https://liuwenxu.com/H0sPFJG4g/</id>
        <link href="https://liuwenxu.com/H0sPFJG4g/">
        </link>
        <updated>2020-04-26T16:34:10.000Z</updated>
        <summary type="html"><![CDATA[<p>⏱⏱求两个日期之间有多少天</p>
]]></summary>
        <content type="html"><![CDATA[<p>⏱⏱求两个日期之间有多少天</p>
<!-- more -->
<blockquote>
<p>在 Java中，我们要获取一个时间段的天数，我们可以使用下面几种方式：</p>
<ol>
<li>Period                 @since 1.8</li>
<li>Duration            @since 1.8</li>
<li>ChronoUnit       @since 1.8</li>
</ol>
</blockquote>
<h1 id="一-参数声明">一. 参数声明</h1>
<pre><code class="language-java">LocalDate start = LocalDate.of(2020, 1, 1);
LocalDate end = LocalDate.of(2020, 5, 1);
</code></pre>
<h1 id="二period类">二.Period类</h1>
<p>主要通过<code>Period</code>类方法<code>getYears()</code>，<code>getMonths()</code> 和 <code>getDays()</code>来计算.</p>
<p>示例:</p>
<pre><code class="language-java">    /**
     * @Author liuwenxu.com (2020-04-26)
     *
     * @param start
     * @param end
     * @return void
     **/
    private static void testPeriod(LocalDate start, LocalDate end) {

        log.info(&quot;startPeriod : {}&quot;, start);
        log.info(&quot;endPeriod : {}&quot;, end);

        Period period = Period.between(start, end);
        log.info(&quot;[{}~{})之间共有：{}年,{}月,{}日&quot;, start, end, period.getYears(), +period.getMonths(), +period.getDays());
    }
</code></pre>
<p>结果:</p>
<pre><code class="language-bash">- startPeriod : 2020-01-01
- endPeriod : 2020-05-01
- [2020-01-01~2020-05-01)之间共有：0年,4月,0日
</code></pre>
<h1 id="三duration类">三.Duration类</h1>
<p>提供了使用基于时间的值测量时间量的方法:</p>
<p>天数：<code>toDays()</code>;<br>
小时：<code>toHours()</code>;<br>
分钟：<code>toMinutes()</code>;<br>
秒数：<code>toMillis()</code>;<br>
纳秒：<code>toNanos()</code>;</p>
<p>示例: 转换日期时提前一天</p>
<pre><code class="language-java">    /**
     * @Author liuwenxu.com (2020-04-26)
     *
     * @param start
     * @param end
     * @return void
     **/
    private static void testDuration(LocalDate start, LocalDate end) {

        Instant startInstant = start.atStartOfDay(ZoneId.systemDefault()).toInstant();
        Instant endInstant = end.atStartOfDay(ZoneId.systemDefault()).toInstant();

        log.info(&quot;startInstant : {}&quot;, startInstant);
        log.info(&quot;endInstant : {}&quot;, endInstant);

        Duration between = Duration.between(startInstant, endInstant);
        log.info(&quot;[{}~{})之间共有：{}天&quot;, start, end, between.toDays());

    }
</code></pre>
<p>结果:</p>
<pre><code class="language-bash">- startInstant : 2019-12-31T16:00:00Z
- endInstant : 2020-04-30T16:00:00Z
- [2020-01-01~2020-05-01)之间共有：121天
</code></pre>
<h1 id="四chronounit类">四.ChronoUnit类</h1>
<p>ChronoUnit类使用<code>between()</code>方法求在单个时间单位内测量一段时间，例如天数、小时、周或秒等。</p>
<p>示例:</p>
<pre><code class="language-java">	/**
     * @Author liuwenxu.com (2020-04-26)
     *
     * @param start
     * @param end
     * @return void
     **/
    private static void testChronoUnit(LocalDate start, LocalDate end) {
        log.info(&quot;startChronoUnit : {}&quot;, start);
        log.info(&quot;endChronoUnit : {}&quot;, end);

        long daysDiff = ChronoUnit.DAYS.between(start, end);
        log.info(&quot;[{}~{})之间共有：{}天&quot;, start, end, daysDiff);

    }
</code></pre>
<p>结果:</p>
<pre><code class="language-bash">- startInstant : 2020-01-01
- endInstant : 2020-05-01
- [2020-01-01~2020-05-01)之间共有：121天
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[获取指定时间内指定星期几的所有日期]]></title>
        <id>https://liuwenxu.com/fOJ3swyxZ/</id>
        <link href="https://liuwenxu.com/fOJ3swyxZ/">
        </link>
        <updated>2020-04-26T12:40:11.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p>输入开始时间，截止时间，星期几，三个参数，获取这两个日期之间指定星期几的日期</p>
</blockquote>
<h1 id="一-参数声明">一. 参数声明：</h1>
<pre><code class="language-java">LocalDate start = LocalDate.of(2020, 4, 1);
LocalDate end = LocalDate.of(2020, 5, 1);
int week = 1;
</code></pre>
<h1 id="二-测试">二. 测试：</h1>
<pre><code class="language-java">/**
 * 获取指定时间内星期几的所有日期
 * @Author liuwenxu.com (2020-04-26)
 *
 * @param start 开始日期 2020-04-01
 * @param end   截止日期 2020-05-01
 * @param week  星期几 1
 * @return ArrayList&lt;LocalDate&gt; [2020-04-06, 2020-04-13, 2020-04-20, 2020-04-27]
 */
public static List getWeekInTimes(LocalDate start, LocalDate end, int week) {
    ArrayList&lt;LocalDate&gt; list = new ArrayList&lt;&gt;();

    long days = ChronoUnit.DAYS.between(start, end);
    log.info(&quot;[{}~{})之间共有：{}天&quot;, start, end, days);

    Calendar startCalender = GregorianCalendar.from(start.atStartOfDay(ZoneId.systemDefault()));
    for (int i = 0; i &lt; days - 1; i++) {
        startCalender.add(Calendar.DATE, 1);

        if (startCalender.get(Calendar.DAY_OF_WEEK) == week + 1) {// 1代表周日，7代表周六
            list.add(
                    LocalDateTime.ofInstant(
                            startCalender.toInstant(),
                            ZoneOffset.systemDefault()
                    ).toLocalDate()
            );
        }
    }
    log.info(&quot;[{}~{})之间共有：{}个 星期{}&quot;, start, end, list.size(), week);
    return list;
}
</code></pre>
<h1 id="三-结果">三. 结果</h1>
<pre><code class="language-bash">- [2020-04-01~2020-05-01)之间共有：30天
- [2020-04-01~2020-05-01)之间共有：4个 星期1
[2020-04-06, 2020-04-13, 2020-04-20, 2020-04-27]
</code></pre>
<h1 id="四-拓展">四. 拓展</h1>
<h2 id="获取当月所有周末的日期">获取当月所有周末的日期</h2>
<pre><code class="language-java">    /**
     * 获取当月的所有周末
     * @Author liuwenxu.com (2020-04-26)
     *
     * @param year  2020
     * @param month 4
     * @return 
     */
    public static List getWeekendInMonth(int year, int month) {

        List list = new ArrayList();
        Calendar calendar = Calendar.getInstance();
        calendar.set(Calendar.YEAR, year);// 不设置的话默认为当年
        calendar.set(Calendar.MONTH, month - 1);// 设置月份
        calendar.set(Calendar.DAY_OF_MONTH, 1);// 设置为当月第一天
        int daySize = calendar.getActualMaximum(Calendar.DAY_OF_MONTH);// 当月最大天数
        for (int i = 0; i &lt; daySize - 1; i++) {
            calendar.add(Calendar.DATE, 1);//在第一天的基础上加1
            int week = calendar.get(Calendar.DAY_OF_WEEK);
            if (week == Calendar.SATURDAY || week == Calendar.SUNDAY) {// 1代表周日，7代表周六 判断这是一个星期的第几天从而判断是否是周末
                list.add(year + &quot;-&quot; + month + &quot;-&quot; + calendar.get(Calendar.DAY_OF_MONTH));// 得到当天是一个月的第几天
            }
        }
        return list;
    }
</code></pre>
<h2 id="结果">结果：</h2>
<pre><code class="language-bash">[2020-4-4, 2020-4-5, 2020-4-11, 2020-4-12, 2020-4-18, 2020-4-19, 2020-4-25, 2020-4-26]
</code></pre>
<h1 id="附代码原文件">附：<a href="https://github.com/RookieXv/mybatis-plus/blob/master/src/main/java/com/example/test_case/GetWeekOfDate.java">代码原文件</a></h1>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[自定义Spring Boot启动图案]]></title>
        <id>https://liuwenxu.com/LFImdFTEW/</id>
        <link href="https://liuwenxu.com/LFImdFTEW/">
        </link>
        <updated>2020-03-24T08:26:48.000Z</updated>
        <summary type="html"><![CDATA[<p>教你怎么自定义修改<strong>Spring Boot</strong>项目启动图案，<br>
快来学学吧 ！</p>
]]></summary>
        <content type="html"><![CDATA[<p>教你怎么自定义修改<strong>Spring Boot</strong>项目启动图案，<br>
快来学学吧 ！</p>
<!-- more -->
<p>在<code>resources</code>目录下，新建<code>banner.txt</code>，将下面内容拷贝进去，重新启动即可</p>
<pre><code class="language-java">${AnsiColor.BRIGHT_YELLOW}
                                           _ooAoo_
                                          o9999999o
                                          88&quot; . &quot;88
                                          (| -_- |)
                                          O\  =  /O
                                       ____/`---'\____
                                     .'  \\|     |//  `.
                                    /  \\|||  :  |||//  \
                                   /  _||||| -:- |||||-  \
                                   |   | \\\  -  /// |   |
                                   | \_|  ''\---/''  |   |
                                   \  .-\__  `-`  ___/-. /
                                 ___`. .'  /--.--\  `. . __
                              .&quot;&quot; '&lt;  `.___\_&lt;|&gt;_/___.'  &gt;'&quot;&quot;.
                             | | :  `- \`.;`\ _ /`;.`/ - ` : | |
                             \  \ `-.   \_ __\ /__ _/   .-` /  /
                        ======`-.____`-.___\_____/___.-`____.-'======
                                           `=---='
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                                   佛祖保佑       永无BUG
                    ${AnsiColor.BRIGHT_CYAN}
                    Application Version: ${application.version}${application.formatted-version}
                    Spring Boot Version: ${spring-boot.version}${spring-boot.formatted-version}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[生成项目目录树]]></title>
        <id>https://liuwenxu.com/wZp6XlKZp/</id>
        <link href="https://liuwenxu.com/wZp6XlKZp/">
        </link>
        <updated>2020-03-24T08:20:48.000Z</updated>
        <summary type="html"><![CDATA[<p>还在困惑于大神博客中<strong>项目结构树</strong>是怎样生成的吗？<br>
快来看看吧~</p>
]]></summary>
        <content type="html"><![CDATA[<p>还在困惑于大神博客中<strong>项目结构树</strong>是怎样生成的吗？<br>
快来看看吧~</p>
<!-- more -->
<p>我们在写博客时，经常看到大佬们会把项目的结构以下面的形式画出来</p>
<pre><code class="language-bash">├─src
│  ├─main
│  │  ├─java
│  │  │  └─com
│  │  │      └─example
│  │  │          └─mybatisplus
│  │  │              ├─config
│  │  │              ├─controller
│  │  │              ├─entity
│  │  │              ├─mapper
│  │  │              └─service
│  │  │                  └─impl
│  │  └─resources
│  │      ├─mapper
│  │      │  └─mybatisplus
│  │      ├─static
│  │      └─templates
│  └─test
│      └─java
└─target
</code></pre>
<figure data-type="image" tabindex="1"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动" loading="lazy"></figure>
<p>那么我们该怎么像大佬一样优秀呢？其实很简单，我们可以使用windows自带的 <strong>tree</strong> 命令。</p>
<p>其实tree命令 是一个很不错的功能。可以把指定文件夹的所以文件用树状罗列出来。然后我们查看树状结构就能够了解有那些文件，然后我们在去查看需要关心的有那些文件就可以了。</p>
<p>用法：TREE [d:][path1] [/A][/F] &gt; [d:][path2/pro_tree.txt]</p>
<p>​            ↓             ↓           ↓    ↓                     ↓</p>
<p>解读：命令   项目路径   符号 文件   生成的<code>tree</code>保存到文件</p>
<p>我们按 <em>win</em>+R 键,输入cmd，进入黑窗口，选择进入我们要生成目录树的目录下，输入</p>
<pre><code class="language-bash">tree /F
</code></pre>
<figure data-type="image" tabindex="2"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动" loading="lazy"></figure>
<p>即可生成具体的文件的目录树，如果只想具体的文件夹，则直接输入<code>tree</code>。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[数据库COUNT(*)、COUNT(字段)和COUNT(1)的异同]]></title>
        <id>https://liuwenxu.com/cxOh2oJTM/</id>
        <link href="https://liuwenxu.com/cxOh2oJTM/">
        </link>
        <updated>2020-03-23T08:15:41.000Z</updated>
        <summary type="html"><![CDATA[<p>对于数据库中的<strong>COUNT</strong>函数，你了解多少呢？<br>
还在因为弄不清<strong>COUNT(*)</strong>、**COUNT(字段)<strong>和</strong>COUNT(1)**而苦恼吗？<br>
快看看这篇文章吧！</p>
]]></summary>
        <content type="html"><![CDATA[<p>对于数据库中的<strong>COUNT</strong>函数，你了解多少呢？<br>
还在因为弄不清<strong>COUNT(*)</strong>、**COUNT(字段)<strong>和</strong>COUNT(1)**而苦恼吗？<br>
快看看这篇文章吧！</p>
<!-- more -->
<blockquote>
<p>在数据库的增删改查操作中，使用最频繁的就是查询操作。而在所有查询操作中，统计数量操作更是经常被用到。</p>
<p>关于数据库中行数统计，无论是MySQL还是Oracle，都有一个函数可以使用，那就是<code>COUNT</code>。</p>
</blockquote>
<h3 id="count">COUNT</h3>
<p>MySQL官网给出的解释是：</p>
<p>1、COUNT(expr) ，返回SELECT语句检索的行中expr的值不为NULL的数量。结果是一个BIGINT值。</p>
<p>2、如果查询结果没有命中任何记录，则返回0</p>
<p>3、但是，值得注意的是，<code>COUNT(*)</code> 的统计结果中，会包含值为NULL的行数。</p>
<p>例如：</p>
<pre><code class="language-sql">create table #bla(id int,age int)
insert #student values(null,null)
insert #student values(1,null)
insert #student values(null,1)
insert #student values(1,null)
insert #student values(null,1)
insert #student values(1,null)
insert #student values(null,null)
</code></pre>
<figure data-type="image" tabindex="1"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动" loading="lazy"></figure>
<p>使用语句count(*),count(id),count(id2)查询结果如下：</p>
<pre><code class="language-sql">select count(*),count(id),count(age)
from #student
results 7 3 2
</code></pre>
<figure data-type="image" tabindex="2"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动" loading="lazy"></figure>
<p><strong><code>COUNT(常量)</code> 和 <code>COUNT(\*)</code>表示的是直接查询符合条件的数据库表的行数。而<code>COUNT(列名)</code>表示的是查询符合条件的列的值不为NULL的行数。</strong></p>
<p><strong>而COUNT(*)是SQL92定义的标准统计行数的语法，因为他是标准语法，所以MySQL数据库对他进行过很多优化。</strong></p>
<blockquote>
<p>SQL92，是数据库的一个ANSI/ISO标准。它定义了一种语言（SQL）以及数据库的行为（事务、隔离级别等）。</p>
</blockquote>
<h3 id="count的优化">COUNT(*)的优化</h3>
<p>区分不同的执行引擎，MySQL中比较常用的执行引擎就是InnoDB和MyISAM。</p>
<p>MyISAM和InnoDB有很多区别，其中有一个关键的区别和我们接下来要介绍的COUNT(*)有关，那就是MyISAM不支持事务，MyISAM中的锁是表级锁；而InnoDB支持事务，并且支持行级锁。</p>
<p><strong><code>MyISAM</code>做了一个简单的优化，那就是它可以把表的总行数单独记录下来，如果从一张表中使用COUNT(*)进行查询的时候，可以直接返回这个记录下来的数值就可以了，当然，前提是不能有where条件。</strong></p>
<p><strong><code>InnoDB</code>中索引分为聚簇索引（主键索引）和非聚簇索引（非主键索引），聚簇索引的叶子节点中保存的是整行记录，而非聚簇索引的叶子节点中保存的是该行记录的主键的值。</strong></p>
<p><strong>所以，相比之下，非聚簇索引要比聚簇索引小很多，所以MySQL会优先选择最小的非聚簇索引来扫表。所以，当我们建表的时候，除了主键索引以外，创建一个非主键索引还是有必要的。</strong></p>
<p>至此，我们介绍完了MySQL数据库对于COUNT(*)的优化，这些优化的前提都是查询语句中不包含WHERE以及GROUP BY条件。</p>
<h3 id="count1"><strong>COUNT(1)</strong></h3>
<blockquote>
<p>InnoDB handles SELECT COUNT(*) and SELECT COUNT(1) operations in the same way. There is no performance difference.</p>
</blockquote>
<p><strong>所以，对于COUNT(1)和COUNT(*)，MySQL的优化是完全一样的，根本不存在谁比谁快！</strong></p>
<p>建议使用<code>COUNT(*)</code>！因为这个是SQL92定义的标准统计行数的语法，而且本文只是基于MySQL做了分析，关于Oracle中的这个问题，也是众说纷纭的呢。</p>
<h3 id="count字段">COUNT(字段)</h3>
<p>最后，就是我们一直还没提到的COUNT(字段)，他的查询就比较简单粗暴了，就是进行全表扫描，然后判断指定字段的值是不是为NULL，不为NULL则累加。</p>
<p>相比<code>COUNT(*)</code>，<code>COUNT(字段)</code>多了一个步骤就是判断所查询的字段是否为NULL，所以他的性能要比<code>COUNT(*)</code>慢。</p>
<h3 id="总结">总结</h3>
<p>本文介绍了COUNT函数的用法，主要用于统计表行数。主要用法有COUNT(*)、COUNT(字段)和COUNT(1)。</p>
<p>因为COUNT(<em>)是SQL92定义的标准统计行数的语法，所以MySQL对他进行了很多优化，<code>MyISAM</code>中会直接把表的总行数单独记录下来供COUNT(</em>)查询，而InnoDB则会在扫表的时候选择最小的索引来降低成本。当然，这些优化的前提都是没有进行where和group的条件查询。</p>
<p>在<code>InnoDB</code>中COUNT(*)和COUNT(1)实现上没有区别，而且效率一样，但是COUNT(字段)需要进行字段的非NULL判断，所以效率会低一些。</p>
<p>因为COUNT(<em>)是SQL92定义的标准统计行数的语法，并且效率高，所以请直接使用COUNT(</em>)查询表的行数！</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[MySQL是否允许在唯一索引字段中添加多个NULL值]]></title>
        <id>https://liuwenxu.com/mysql-null-unique/</id>
        <link href="https://liuwenxu.com/mysql-null-unique/">
        </link>
        <updated>2020-03-16T15:59:59.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p>今天正在吃饭，一个朋友提出了一个他面试中遇到的问题，<code>MySQL允许在唯一索引字段中添加多个NULL值</code>。</p>
<p>这个问题对于我一个非专业DBA来说，也没特地去验证过，所以正好借此机会验证一下，做个记录：</p>
</blockquote>
<h1 id="1-测试环境">1 测试环境：</h1>
<pre><code class="language-sql">数据库：MySQL5.7.25
数据库引擎：InnoDB
连接工具：Navicat Premium
</code></pre>
<h1 id="2-建库建表">2 建库，建表</h1>
<p>首先，创建数据库，并创建测试表 test：</p>
<pre><code class="language-sql">DROP TABLE IF EXISTS `test`;
CREATE TABLE `test`  (
  `id` int(11) NOT NULL COMMENT 'ID',
  `name` varchar(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL DEFAULT NULL COMMENT '姓名',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = latin1 COLLATE = latin1_swedish_ci ROW_FORMAT = Dynamic;
</code></pre>
<h1 id="3-添加唯一索引">3 添加唯一索引</h1>
<p>然后，我们给name字段添加一个唯一索引：</p>
<pre><code class="language-sql">ALTER TABLE `test` ADD UNIQUE ( `name`);
</code></pre>
<h1 id="4-插入测试数据">4 插入测试数据</h1>
<p>最后，我们尝试插入两条name字段为null的数据：</p>
<pre><code class="language-sql">INSERT INTO `test` VALUES (1, NULL);
INSERT INTO `test` VALUES (2, NULL);
</code></pre>
<h1 id="5-结果">5 结果</h1>
<p>并没有报错，说明<strong>MySQL允许在唯一索引字段中添加多个NULL值</strong>。</p>
<p>数据表如下：</p>
<p><img src="https://img-blog.csdnimg.cn/20200316234832732.png" alt="img" loading="lazy"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动" loading="lazy"></p>
<h1 id="6-解释">6 解释</h1>
<h2 id="61-官方解释">6.1 官方解释</h2>
<p>MySQL的官方文档给出的解释为：</p>
<blockquote>
<p>A UNIQUE index creates a constraint such that all values in the index must be distinct. An error occurs if you try to add a new row with a key value that matches an existing row. <font color=red><strong>This constraint does not apply to NULL values except for the BDB storage engine. For other engines, a UNIQUE index allows multiple NULL values for columns that can contain NULL.</strong></font></p>
</blockquote>
<p>我们可以看出，此约束不适用于除BDB存储引擎之外的空值。对于其他引擎，唯一索引允许包含空值的列有多个空值。</p>
<h2 id="62-网友解释">6.2 网友解释</h2>
<p>网友给出的解释为：</p>
<blockquote>
<p>在sql server中，唯一索引字段不能出现多个null值</p>
<p>在mysql 的innodb引擎中，是允许在唯一索引的字段中出现多个null值的。</p>
<p>根据NULL的定义，<font color=red><strong>NULL表示的是未知，因此两个NULL比较的结果既不相等，也不不等，结果仍然是未知。</strong></font>根据这个定义，多个NULL值的存在应该不违反唯一约束，所以是合理的，在oracel也是如此。</p>
</blockquote>
<p>这个解释很形象，<u>既不相等，也不不等，所以结果未知。</u></p>
<p>至于，sqlserver和MySQL其他引擎还有待验证。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[java中获取类加载路径和项目根路径的5种方法]]></title>
        <id>https://liuwenxu.com/java-dvsdsd/</id>
        <link href="https://liuwenxu.com/java-dvsdsd/">
        </link>
        <updated>2019-11-14T09:28:36.000Z</updated>
        <content type="html"><![CDATA[<pre><code class="language-java"> import java.io.File;
 import java.io.IOException;
 import java.net.URL;
 
 public class MyUrlDemo {
 
     
     public static void main(String[] args) {
         MyUrlDemo muDemo = new MyUrlDemo();
         try {
             muDemo.showURL();
         } catch (IOException e) {
             // TODO Auto-generated catch block
             e.printStackTrace();
         }
     }
 
     public void showURL() throws IOException {
 
         // 第一种：获取类加载的根路径   D:\git\daotie\daotie\target\classes
         File f = new File(this.getClass().getResource(&quot;/&quot;).getPath());
         System.out.println(f);
 
         // 获取当前类的所在工程路径; 如果不加“/”  获取当前类的加载目录  D:\git\daotie\daotie\target\classes\my
         File f2 = new File(this.getClass().getResource(&quot;&quot;).getPath());
         System.out.println(f2);
 
         // 第二种：获取项目路径    D:\git\daotie\daotie
         File directory = new File(&quot;&quot;);// 参数为空
         String courseFile = directory.getCanonicalPath();
         System.out.println(courseFile);
 
 
         // 第三种：  file:/D:/git/daotie/daotie/target/classes/
         URL xmlpath = this.getClass().getClassLoader().getResource(&quot;&quot;);
         System.out.println(xmlpath);
 
 
         // 第四种： D:\git\daotie\daotie
         System.out.println(System.getProperty(&quot;user.dir&quot;));
         /*
          * 结果： C:\Documents and Settings\Administrator\workspace\projectName
          * 获取当前工程路径
          */
 
         // 第五种：  获取所有的类路径 包括jar包的路径
         System.out.println(System.getProperty(&quot;java.class.path&quot;));
 
     }
 }
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[（三）Mybatis-Plus代码生成器]]></title>
        <id>https://liuwenxu.com/mybatis-plus-3/</id>
        <link href="https://liuwenxu.com/mybatis-plus-3/">
        </link>
        <updated>2019-09-28T10:38:17.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p>上一篇我们已经把所有需要的东西配置好了，接下来我们准备连接数据库生成代码。</p>
</blockquote>
<p>首先准备一张student表：</p>
<pre><code class="language-sql">SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
-- Table structure for student
-- ----------------------------
DROP TABLE IF EXISTS `student`;
CREATE TABLE `student`  (
  `id` int(20) NOT NULL AUTO_INCREMENT COMMENT '学生id',
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '姓名',
  `age` int(11) NULL DEFAULT NULL COMMENT '年龄',
  `is_valid` int(11) NULL DEFAULT NULL COMMENT '是否在读',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

SET FOREIGN_KEY_CHECKS = 1;
</code></pre>
<figure data-type="image" tabindex="1"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动" loading="lazy"></figure>
<h1 id="一-配置代码生成器">一、配置代码生成器</h1>
<blockquote>
<p>Mybatis-Plus的代码生成器是不需要依赖spring的，所以我们可以直接在test中新建一个类<strong>CodeGeneratorDefault</strong></p>
</blockquote>
<h2 id="默认模板生成"><strong>默认模板生成：</strong></h2>
<pre><code class="language-java">import com.baomidou.mybatisplus.core.exceptions.MybatisPlusException;
import com.baomidou.mybatisplus.core.toolkit.StringPool;
import com.baomidou.mybatisplus.core.toolkit.StringUtils;
import com.baomidou.mybatisplus.generator.AutoGenerator;
import com.baomidou.mybatisplus.generator.InjectionConfig;
import com.baomidou.mybatisplus.generator.config.*;
import com.baomidou.mybatisplus.generator.config.po.TableInfo;
import com.baomidou.mybatisplus.generator.config.rules.NamingStrategy;
import com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine;

import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class CodeGeneratorDefault {


    /**
     * &lt;p&gt;
     * 读取控制台内容
     * &lt;/p&gt;
     */

    public static String scanner(String tip) {
        Scanner scanner = new Scanner(System.in);
        StringBuilder help = new StringBuilder();
        help.append(&quot;请输入&quot; + tip + &quot;：&quot;);
        System.out.println(help.toString());
        if (scanner.hasNext()) {
            String ipt = scanner.next();
            if (StringUtils.isNotEmpty(ipt)) {
                return ipt;
            }
        }
        throw new MybatisPlusException(&quot;请输入正确的&quot; + tip + &quot;！&quot;);
    }

    public static void main(String[] args) {
        // 代码生成器
        AutoGenerator mpg = new AutoGenerator();

        // 全局配置
        GlobalConfig gc = new GlobalConfig();
        String projectPath = System.getProperty(&quot;user.dir&quot;);
        gc.setOutputDir(projectPath + &quot;/src/main/java&quot;);
        gc.setAuthor(&quot;liuwenxu&quot;);
        gc.setOpen(false);
        gc.setSwagger2(true); // 实体属性 Swagger2 注解
        mpg.setGlobalConfig(gc);

        // 数据源配置
        DataSourceConfig dsc = new DataSourceConfig();
        dsc.setUrl(&quot;jdbc:mysql://172.30.7.143:3306/wxyj_sj?serverTimezone=UTC&amp;characterEncoding=utf-8&amp;useSSL=false&quot;);
        // dsc.setSchemaName(&quot;public&quot;);
        dsc.setDriverName(&quot;com.mysql.cj.jdbc.Driver&quot;);
        dsc.setUsername(&quot;wxyj&quot;);
        dsc.setPassword(&quot;123456&quot;);
        mpg.setDataSource(dsc);

        // 包配置
        PackageConfig pc = new PackageConfig();
        pc.setModuleName(scanner(&quot;模块名&quot;));
        pc.setParent(&quot;com.example&quot;);
        mpg.setPackageInfo(pc);

        // 自定义配置
        InjectionConfig cfg = new InjectionConfig() {
            @Override
            public void initMap() {
                // to do nothing
            }
        };
        List&lt;FileOutConfig&gt; focList = new ArrayList&lt;&gt;();
        focList.add(new FileOutConfig(&quot;/templates/mapper.xml.ftl&quot;) {
            @Override
            public String outputFile(TableInfo tableInfo) {
                // 自定义输入文件名称
                return projectPath + &quot;/src/main/resources/mapper/&quot; + pc.getModuleName()
                        + &quot;/&quot; + tableInfo.getEntityName() + &quot;Mapper&quot; + StringPool.DOT_XML;
            }
        });
        cfg.setFileOutConfigList(focList);
        mpg.setCfg(cfg);
        mpg.setTemplate(new TemplateConfig().setXml(null));

        // 策略配置
        StrategyConfig strategy = new StrategyConfig();
        strategy.setNaming(NamingStrategy.underline_to_camel);
        strategy.setColumnNaming(NamingStrategy.underline_to_camel);
        //strategy.setSuperEntityClass(&quot;com.baomidou.ant.common.BaseEntity&quot;);
        strategy.setEntityLombokModel(true);
        strategy.setRestControllerStyle(true);
        //strategy.setSuperControllerClass(&quot;com.baomidou.ant.common.BaseController&quot;);
        strategy.setInclude(scanner(&quot;表名&quot;));
        //strategy.setSuperEntityColumns(&quot;id&quot;);
        strategy.setControllerMappingHyphenStyle(true);
        strategy.setTablePrefix(&quot;_&quot;);
        mpg.setStrategy(strategy);
        mpg.setTemplateEngine(new FreemarkerTemplateEngine());
        mpg.execute();
    }
}
</code></pre>
<figure data-type="image" tabindex="2"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动" loading="lazy"></figure>
<p>点击运行，在输入栏按照以下流程执行即可</p>
<p><img src="https://img-blog.csdnimg.cn/20190926114008477.png" alt="img" loading="lazy"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动" loading="lazy"></p>
<p>执行后项目结构如下：</p>
<pre><code class="language-bash">├─src
│  ├─main
│  │  ├─java
│  │  │  └─com
│  │  │      └─example
│  │  │          └─mybatisplus
│  │  │              │  MybatisPlusApplication.java
│  │  │              │
│  │  │              ├─config
│  │  │              │      SwaggerConfig.java
│  │  │              │
│  │  │              ├─controller
│  │  │              │      StudentController.java
│  │  │              │
│  │  │              ├─entity
│  │  │              │      Student.java
│  │  │              │
│  │  │              ├─mapper
│  │  │              │      StudentMapper.java
│  │  │              │
│  │  │              └─service
│  │  │                  │  IStudentService.java
│  │  │                  │
│  │  │                  └─impl
│  │  │                          StudentServiceImpl.java
│  │  │
│  │  └─resources
│  │      │  application.yml
│  │      │
│  │      ├─mapper
│  │      │  └─mybatisplus
│  │      │          StudentMapper.xml
│  │      │
│  │      ├─static
│  │      └─templates
│  │              controller-mine.java.ftl
│  │              entity-mine.java.ftl
│  │              mapper-mine.java.ftl
│  │              service-mine.java.ftl
│  │              serviceImpl-mine.java.ftl
│  │
│  └─test
│      └─java
│              CodeGenerator.java
│              CodeGeneratorDefault.java
</code></pre>
<figure data-type="image" tabindex="3"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动" loading="lazy"></figure>
<h2 id="自定义模板生成"><strong>自定义模板生成：</strong></h2>
<blockquote>
<p>有些小伙伴不满足于默认模板生成的文件，下面我们来演示自定义模板：</p>
</blockquote>
<p><strong>1、添加freemarker依赖：</strong></p>
<pre><code class="language-bash">&lt;dependency&gt;
    &lt;groupId&gt;org.freemarker&lt;/groupId&gt;
    &lt;artifactId&gt;freemarker&lt;/artifactId&gt;
    &lt;version&gt;2.3.23&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<figure data-type="image" tabindex="4"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动" loading="lazy"></figure>
<p><strong>2、编写自定义模板：（文末有源码链接）</strong></p>
<pre><code>controller-mine.java.ftl
entity-mine.java.ftl
mapper-mine.java.ftl
service-mine.java.ftl
serviceImpl-mine.java.ftl
</code></pre>
<figure data-type="image" tabindex="5"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动" loading="lazy"></figure>
<p><strong>3、修改代码生成器配置：</strong></p>
<pre><code class="language-java">import com.baomidou.mybatisplus.core.exceptions.MybatisPlusException;
import com.baomidou.mybatisplus.core.toolkit.StringPool;
import com.baomidou.mybatisplus.core.toolkit.StringUtils;
import com.baomidou.mybatisplus.generator.AutoGenerator;
import com.baomidou.mybatisplus.generator.InjectionConfig;
import com.baomidou.mybatisplus.generator.config.*;
import com.baomidou.mybatisplus.generator.config.po.TableInfo;
import com.baomidou.mybatisplus.generator.config.rules.NamingStrategy;
import com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine;

import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class CodeGenerator {


    /**
     * &lt;p&gt;
     * 读取控制台内容
     * &lt;/p&gt;
     */

    public static String scanner(String tip) {
        Scanner scanner = new Scanner(System.in);
        StringBuilder help = new StringBuilder();
        help.append(&quot;请输入&quot; + tip + &quot;：&quot;);
        System.out.println(help.toString());
        if (scanner.hasNext()) {
            String ipt = scanner.next();
            if (StringUtils.isNotEmpty(ipt)) {
                return ipt;
            }
        }
        throw new MybatisPlusException(&quot;请输入正确的&quot; + tip + &quot;！&quot;);
    }

    public static void main(String[] args) {
        // 代码生成器
        AutoGenerator mpg = new AutoGenerator();

        // 全局配置
        GlobalConfig gc = new GlobalConfig();
        String projectPath = System.getProperty(&quot;user.dir&quot;);
        gc.setOutputDir(projectPath + &quot;/src/main/java&quot;);
        gc.setAuthor(&quot;liuwenxu&quot;);
        gc.setOpen(false);
        gc.setSwagger2(true); // 实体属性 Swagger2 注解
        mpg.setGlobalConfig(gc);

        // 数据源配置
        DataSourceConfig dsc = new DataSourceConfig();
        dsc.setUrl(&quot;jdbc:mysql://172.30.7.143:3306/wxyj_sj?serverTimezone=UTC&amp;characterEncoding=utf-8&amp;useSSL=false&quot;);
        // dsc.setSchemaName(&quot;public&quot;);
        dsc.setDriverName(&quot;com.mysql.cj.jdbc.Driver&quot;);
        dsc.setUsername(&quot;wxyj&quot;);
        dsc.setPassword(&quot;123456&quot;);
        mpg.setDataSource(dsc);

        // 包配置
        PackageConfig pc = new PackageConfig();
        pc.setModuleName(scanner(&quot;模块名&quot;));
        pc.setParent(&quot;com.example&quot;);
        mpg.setPackageInfo(pc);

        // 自定义配置
        InjectionConfig cfg = new InjectionConfig() {
            @Override
            public void initMap() {
                // to do nothing
            }
        };
        List&lt;FileOutConfig&gt; focList = new ArrayList&lt;&gt;();
        focList.add(new FileOutConfig(&quot;/templates/mapper.xml.ftl&quot;) {
            @Override
            public String outputFile(TableInfo tableInfo) {
                // 自定义输入文件名称
                return projectPath + &quot;/src/main/resources/mapper/&quot; + pc.getModuleName()
                        + &quot;/&quot; + tableInfo.getEntityName() + &quot;Mapper&quot; + StringPool.DOT_XML;
            }
        });
        cfg.setFileOutConfigList(focList);
        mpg.setCfg(cfg);

        // 配置模板
        TemplateConfig templateConfig = new TemplateConfig();

        // 配置自定义输出模板
        //指定自定义模板路径，注意不要带上.ftl/.vm, 会根据使用的模板引擎自动识别
        templateConfig.setEntity(&quot;templates/entity-mine.java&quot;);
        templateConfig.setMapper(&quot;templates/mapper-mine.java&quot;);
        templateConfig.setService(&quot;templates/service-mine.java&quot;);
        templateConfig.setServiceImpl(&quot;templates/serviceImpl-mine.java&quot;);
        templateConfig.setController(&quot;templates/controller-mine.java&quot;);
        templateConfig.setXml(null);
        mpg.setTemplate(templateConfig);

        // 策略配置
        StrategyConfig strategy = new StrategyConfig();
        strategy.setNaming(NamingStrategy.underline_to_camel);
        strategy.setColumnNaming(NamingStrategy.underline_to_camel);
        //strategy.setSuperEntityClass(&quot;com.baomidou.ant.common.BaseEntity&quot;);
        strategy.setEntityLombokModel(true);
        strategy.setRestControllerStyle(true);
        //strategy.setSuperControllerClass(&quot;com.baomidou.ant.common.BaseController&quot;);
        strategy.setInclude(scanner(&quot;表名&quot;));
        //strategy.setSuperEntityColumns(&quot;id&quot;);
        strategy.setControllerMappingHyphenStyle(true);
        strategy.setTablePrefix(&quot;_&quot;);
        mpg.setStrategy(strategy);
        mpg.setTemplateEngine(new FreemarkerTemplateEngine());
        mpg.execute();
    }
}
</code></pre>
<h1 id="二-总结">二、总结</h1>
<p>至此，<code>mybatis plus</code> 的基础使用已经介绍完了，后面我将陆续为大家介绍她的高级用法，收藏一下吧！</p>
<h2 id="附项目源码">附：<a href="https://github.com/RookieXv/mybatis-plus">项目源码</a></h2>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[（二）Mybatis-Plus的安装配置]]></title>
        <id>https://liuwenxu.com/mybatis-plus-2/</id>
        <link href="https://liuwenxu.com/mybatis-plus-2/">
        </link>
        <updated>2019-09-27T01:41:21.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p>上一篇文章我们认识了Mybatis-Plus，这篇文章我们一起学习Mybatis-Plus在项目中怎么使用。</p>
</blockquote>
<p><strong>项目结构如下：</strong></p>
<pre><code class="language-bash">  src
   ├─main
   │  ├─java
   │  │  └─com
   │  │      └─example
   │  │          └─mybatisplus
   │  │              └─config
   │  └─resources
   │      ├─static
   │      └─templates
   └─test
       └─java
           └─com
               └─example
                   └─mybatisplus
</code></pre>
<figure data-type="image" tabindex="1"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动" loading="lazy"></figure>
<h1 id="一-安装">一、安装</h1>
<p>全新的 <code>MyBatis-Plus</code> 3.0 版本基于 JDK8，提供了 <code>lambda</code> 形式的调用，所以安装集成 MP3.0 要求如下：</p>
<ul>
<li>JDK 8+</li>
<li>Maven</li>
</ul>
<p>JDK7 以及下的请参考 MP2.0 版本官方文档，地址：<a href="https://baomidou.gitee.io/mybatis-plus-doc/#/">2.0 文档</a></p>
<p>我们在该项目中集成了mybatis-plus，lombok，swagger，集体配置如下：</p>
<h2 id="spring-boot"># Spring Boot</h2>
<p>Maven：</p>
<pre><code class="language-java">&lt;properties&gt;
    &lt;java.version&gt;1.8&lt;/java.version&gt;
    &lt;spring-boot.version&gt;2.0.5.RELEASE&lt;/spring-boot.version&gt;
    &lt;mybatis-plus.version&gt;3.0-RELEASE&lt;/mybatis-plus.version&gt;
    &lt;swagger.version&gt;2.9.2&lt;/swagger.version&gt;
    &lt;lombok.version&gt;1.16.10&lt;/lombok.version&gt;
&lt;/properties&gt;
</code></pre>
<pre><code class="language-bash">&lt;!-- 连接mysql --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;!-- mybatis-plus --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.baomidou&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;${mybatis-plus.version}&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- lombok --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
    &lt;artifactId&gt;lombok&lt;/artifactId&gt;
    &lt;version&gt;${lombok.version}&lt;/version&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;!-- swagger配置 --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;io.springfox&lt;/groupId&gt;
    &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;
    &lt;version&gt;${swagger.version}&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;io.springfox&lt;/groupId&gt;
    &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;
    &lt;version&gt;${swagger.version}&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h2 id="spring-mvc"># Spring MVC</h2>
<p>Maven:</p>
<pre><code class="language-bash">&lt;!-- mybatis-plus --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.baomidou&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis-plus&lt;/artifactId&gt;
    &lt;version&gt;${mybatis-plus.version}&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- 连接mysql --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;!-- lombok --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
    &lt;artifactId&gt;lombok&lt;/artifactId&gt;
    &lt;version&gt;${lombok.version}&lt;/version&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;!-- swagger配置 --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;io.springfox&lt;/groupId&gt;
    &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;
    &lt;version&gt;${swagger.version}&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;io.springfox&lt;/groupId&gt;
    &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;
    &lt;version&gt;${swagger.version}&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<hr>
<p>引入 <code>MyBatis-Plus</code> 之后请不要再次引入 <code>MyBatis</code> 以及 <code>MyBatis-Spring</code>，以避免因版本差异导致的问题。</p>
<h1 id="二-配置">二、配置</h1>
<p>MyBatis-Plus 的配置异常的简单，我们仅需要一些简单的配置即可使用 MyBatis-Plus 的强大功能。</p>
<h2 id="spring-boot-2"># Spring Boot</h2>
<h3 id="配置-mapperscan-注解"><strong>配置 MapperScan 注解</strong></h3>
<pre><code class="language-java">@SpringBootApplication
@MapperScan(&quot;com.example.mybatis-plus.**.mapper&quot;)
public class MybatisPlusApplication {

    public static void main(String[] args) {
        SpringApplication.run(MybatisPlusApplication.class, args);
    }

}
</code></pre>
<h3 id="配置applicationyml"><strong>配置application.yml</strong></h3>
<pre><code class="language-bash">mybatis-plus:
  # xml地址
  mapper-locations: classpath*:mapper/*/*Mapper.xml
  # 实体扫描，多个package用逗号或者分号分隔 #自己的实体类地址
  type-aliases-package: com.example.mybatis-plus
  configuration:
    # 这个配置会将执行的sql打印出来，在开发或测试的时候可以用
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
    #开启驼峰命名法
    map-underscore-to-camel-case: true
</code></pre>
<h2 id="spring-mvc-2"># Spring MVC</h2>
<ul>
<li>
<h3 id="配置-mapperscan"><strong>配置 MapperScan</strong></h3>
</li>
</ul>
<pre><code class="language-bash">&lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;
    &lt;property name=&quot;basePackage&quot; value=&quot;com.baomidou.mybatisplus.samples.quickstart.mapper&quot;/&gt;
&lt;/bean&gt;
</code></pre>
<ul>
<li>
<h3 id="调整-sqlsessionfactory-为-mybatis-plus-的-sqlsessionfactory"><strong>调整 SqlSessionFactory 为 MyBatis-Plus 的 SqlSessionFactory</strong></h3>
</li>
</ul>
<pre><code class="language-bash">&lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean&quot;&gt;
    &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;
&lt;/bean&gt;
</code></pre>
<p>通常来说，一般的简单工程，通过以上配置即可正常使用 MyBatis-Plus。</p>
<h2 id="swagger配置"># swagger配置</h2>
<pre><code class="language-java">package com.example.mybatisplus.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import springfox.documentation.builders.ApiInfoBuilder;
import springfox.documentation.builders.PathSelectors;
import springfox.documentation.builders.RequestHandlerSelectors;
import springfox.documentation.service.ApiInfo;
import springfox.documentation.service.Contact;
import springfox.documentation.spi.DocumentationType;
import springfox.documentation.spring.web.plugins.Docket;
import springfox.documentation.swagger2.annotations.EnableSwagger2;

/**
 * Copyright (C), 2016-2019, Mobius-Vision
 * FileName: SwaggerConfig
 * Author: liuwenxu
 * Date: 2019/7/10 14:59
 * Description: 接口文档说明  http://localhost:8089/swagger-ui.html#/
 */
@Configuration
@EnableSwagger2
public class SwaggerConfig {
    @Bean
    public Docket createRestApi() {
        return new Docket(DocumentationType.SWAGGER_2)
                .apiInfo(apiInfo())
                .select()
                .apis(RequestHandlerSelectors.basePackage(&quot;com.example.mybatis-plus.controller&quot;))
                .paths(PathSelectors.any())
                .build();
    }

    private ApiInfo apiInfo() {
        return new ApiInfoBuilder()
                .title(&quot;mybatis-plus&quot;)
                .description(&quot;mybatis-plus&quot;)
                .contact(new Contact(&quot;liuwenxu&quot;, &quot;&quot;, &quot;&quot;))
                .version(&quot;2.0&quot;)
                .build();
    }

}
 
</code></pre>
]]></content>
    </entry>
</feed>