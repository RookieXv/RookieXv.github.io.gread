{"posts":[{"title":"（三）Mybatis-Plus代码生成器","content":"上一篇我们已经把所有需要的东西配置好了，接下来我们准备连接数据库生成代码。首先准备一张student表：SETNAMESutf8mb4;SETFOREIGN_KEY_CHECKS=0;--------------------------------Tablestructureforstudent------------------------------DROPTABLEIFEXISTS`student`;CREATETABLE`student`(`id`int(20)NOTNULLAUTO_INCREMENTCOMMENT'学生id',`name`varchar(255)CHARACTERSETutf8COLLATEutf8_general_ciNULLDEFAULTNULLCOMMENT'姓名',`age`int(11)NULLDEFAULTNULLCOMMENT'年龄',`is_valid`int(11)NULLDEFAULTNULLCOMMENT'是否在读',PRIMARYKEY(`id`)USINGBTREE)ENGINE=InnoDBAUTO_INCREMENT=1CHARACTERSET=utf8COLLATE=utf8_general_ciROW_FORMAT=Dynamic;SETFOREIGN_KEY_CHECKS=1;一、配置代码生成器Mybatis-Plus的代码生成器是不需要依赖spring的，所以我们可以直接在test中新建一个类CodeGeneratorDefault默认模板生成：importcom.baomidou.mybatisplus.core.exceptions.MybatisPlusException;importcom.baomidou.mybatisplus.core.toolkit.StringPool;importcom.baomidou.mybatisplus.core.toolkit.StringUtils;importcom.baomidou.mybatisplus.generator.AutoGenerator;importcom.baomidou.mybatisplus.generator.InjectionConfig;importcom.baomidou.mybatisplus.generator.config.*;importcom.baomidou.mybatisplus.generator.config.po.TableInfo;importcom.baomidou.mybatisplus.generator.config.rules.NamingStrategy;importcom.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine;importjava.util.ArrayList;importjava.util.List;importjava.util.Scanner;publicclassCodeGeneratorDefault{/***&lt;p&gt;*读取控制台内容*&lt;/p&gt;*/publicstaticStringscanner(Stringtip){Scannerscanner=newScanner(System.in);StringBuilderhelp=newStringBuilder();help.append(&quot;请输入&quot;+tip+&quot;：&quot;);System.out.println(help.toString());if(scanner.hasNext()){Stringipt=scanner.next();if(StringUtils.isNotEmpty(ipt)){returnipt;}}thrownewMybatisPlusException(&quot;请输入正确的&quot;+tip+&quot;！&quot;);}publicstaticvoidmain(String[]args){//代码生成器AutoGeneratormpg=newAutoGenerator();//全局配置GlobalConfiggc=newGlobalConfig();StringprojectPath=System.getProperty(&quot;user.dir&quot;);gc.setOutputDir(projectPath+&quot;/src/main/java&quot;);gc.setAuthor(&quot;liuwenxu&quot;);gc.setOpen(false);gc.setSwagger2(true);//实体属性Swagger2注解mpg.setGlobalConfig(gc);//数据源配置DataSourceConfigdsc=newDataSourceConfig();dsc.setUrl(&quot;jdbc:mysql://172.30.7.143:3306/wxyj_sj?serverTimezone=UTC&amp;characterEncoding=utf-8&amp;useSSL=false&quot;);//dsc.setSchemaName(&quot;public&quot;);dsc.setDriverName(&quot;com.mysql.cj.jdbc.Driver&quot;);dsc.setUsername(&quot;wxyj&quot;);dsc.setPassword(&quot;123456&quot;);mpg.setDataSource(dsc);//包配置PackageConfigpc=newPackageConfig();pc.setModuleName(scanner(&quot;模块名&quot;));pc.setParent(&quot;com.example&quot;);mpg.setPackageInfo(pc);//自定义配置InjectionConfigcfg=newInjectionConfig(){@OverridepublicvoidinitMap(){//todonothing}};List&lt;FileOutConfig&gt;focList=newArrayList&lt;&gt;();focList.add(newFileOutConfig(&quot;/templates/mapper.xml.ftl&quot;){@OverridepublicStringoutputFile(TableInfotableInfo){//自定义输入文件名称returnprojectPath+&quot;/src/main/resources/mapper/&quot;+pc.getModuleName()+&quot;/&quot;+tableInfo.getEntityName()+&quot;Mapper&quot;+StringPool.DOT_XML;}});cfg.setFileOutConfigList(focList);mpg.setCfg(cfg);mpg.setTemplate(newTemplateConfig().setXml(null));//策略配置StrategyConfigstrategy=newStrategyConfig();strategy.setNaming(NamingStrategy.underline_to_camel);strategy.setColumnNaming(NamingStrategy.underline_to_camel);//strategy.setSuperEntityClass(&quot;com.baomidou.ant.common.BaseEntity&quot;);strategy.setEntityLombokModel(true);strategy.setRestControllerStyle(true);//strategy.setSuperControllerClass(&quot;com.baomidou.ant.common.BaseController&quot;);strategy.setInclude(scanner(&quot;表名&quot;));//strategy.setSuperEntityColumns(&quot;id&quot;);strategy.setControllerMappingHyphenStyle(true);strategy.setTablePrefix(&quot;_&quot;);mpg.setStrategy(strategy);mpg.setTemplateEngine(newFreemarkerTemplateEngine());mpg.execute();}}点击运行，在输入栏按照以下流程执行即可执行后项目结构如下：├─src│├─main││├─java│││└─com│││└─example│││└─mybatisplus││││MybatisPlusApplication.java│││││││├─config││││SwaggerConfig.java│││││││├─controller││││StudentController.java│││││││├─entity││││Student.java│││││││├─mapper││││StudentMapper.java│││││││└─service││││IStudentService.java│││││││└─impl│││StudentServiceImpl.java│││││└─resources│││application.yml│││││├─mapper│││└─mybatisplus│││StudentMapper.xml│││││├─static││└─templates││controller-mine.java.ftl││entity-mine.java.ftl││mapper-mine.java.ftl││service-mine.java.ftl││serviceImpl-mine.java.ftl│││└─test│└─java│CodeGenerator.java│CodeGeneratorDefault.java自定义模板生成：有些小伙伴不满足于默认模板生成的文件，下面我们来演示自定义模板：1、添加freemarker依赖：&lt;dependency&gt;&lt;groupId&gt;org.freemarker&lt;/groupId&gt;&lt;artifactId&gt;freemarker&lt;/artifactId&gt;&lt;version&gt;2.3.23&lt;/version&gt;&lt;/dependency&gt;2、编写自定义模板：（文末有源码链接）controller-mine.java.ftlentity-mine.java.ftlmapper-mine.java.ftlservice-mine.java.ftlserviceImpl-mine.java.ftl3、修改代码生成器配置：importcom.baomidou.mybatisplus.core.exceptions.MybatisPlusException;importcom.baomidou.mybatisplus.core.toolkit.StringPool;importcom.baomidou.mybatisplus.core.toolkit.StringUtils;importcom.baomidou.mybatisplus.generator.AutoGenerator;importcom.baomidou.mybatisplus.generator.InjectionConfig;importcom.baomidou.mybatisplus.generator.config.*;importcom.baomidou.mybatisplus.generator.config.po.TableInfo;importcom.baomidou.mybatisplus.generator.config.rules.NamingStrategy;importcom.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine;importjava.util.ArrayList;importjava.util.List;importjava.util.Scanner;publicclassCodeGenerator{/***&lt;p&gt;*读取控制台内容*&lt;/p&gt;*/publicstaticStringscanner(Stringtip){Scannerscanner=newScanner(System.in);StringBuilderhelp=newStringBuilder();help.append(&quot;请输入&quot;+tip+&quot;：&quot;);System.out.println(help.toString());if(scanner.hasNext()){Stringipt=scanner.next();if(StringUtils.isNotEmpty(ipt)){returnipt;}}thrownewMybatisPlusException(&quot;请输入正确的&quot;+tip+&quot;！&quot;);}publicstaticvoidmain(String[]args){//代码生成器AutoGeneratormpg=newAutoGenerator();//全局配置GlobalConfiggc=newGlobalConfig();StringprojectPath=System.getProperty(&quot;user.dir&quot;);gc.setOutputDir(projectPath+&quot;/src/main/java&quot;);gc.setAuthor(&quot;liuwenxu&quot;);gc.setOpen(false);gc.setSwagger2(true);//实体属性Swagger2注解mpg.setGlobalConfig(gc);//数据源配置DataSourceConfigdsc=newDataSourceConfig();dsc.setUrl(&quot;jdbc:mysql://172.30.7.143:3306/wxyj_sj?serverTimezone=UTC&amp;characterEncoding=utf-8&amp;useSSL=false&quot;);//dsc.setSchemaName(&quot;public&quot;);dsc.setDriverName(&quot;com.mysql.cj.jdbc.Driver&quot;);dsc.setUsername(&quot;wxyj&quot;);dsc.setPassword(&quot;123456&quot;);mpg.setDataSource(dsc);//包配置PackageConfigpc=newPackageConfig();pc.setModuleName(scanner(&quot;模块名&quot;));pc.setParent(&quot;com.example&quot;);mpg.setPackageInfo(pc);//自定义配置InjectionConfigcfg=newInjectionConfig(){@OverridepublicvoidinitMap(){//todonothing}};List&lt;FileOutConfig&gt;focList=newArrayList&lt;&gt;();focList.add(newFileOutConfig(&quot;/templates/mapper.xml.ftl&quot;){@OverridepublicStringoutputFile(TableInfotableInfo){//自定义输入文件名称returnprojectPath+&quot;/src/main/resources/mapper/&quot;+pc.getModuleName()+&quot;/&quot;+tableInfo.getEntityName()+&quot;Mapper&quot;+StringPool.DOT_XML;}});cfg.setFileOutConfigList(focList);mpg.setCfg(cfg);//配置模板TemplateConfigtemplateConfig=newTemplateConfig();//配置自定义输出模板//指定自定义模板路径，注意不要带上.ftl/.vm,会根据使用的模板引擎自动识别templateConfig.setEntity(&quot;templates/entity-mine.java&quot;);templateConfig.setMapper(&quot;templates/mapper-mine.java&quot;);templateConfig.setService(&quot;templates/service-mine.java&quot;);templateConfig.setServiceImpl(&quot;templates/serviceImpl-mine.java&quot;);templateConfig.setController(&quot;templates/controller-mine.java&quot;);templateConfig.setXml(null);mpg.setTemplate(templateConfig);//策略配置StrategyConfigstrategy=newStrategyConfig();strategy.setNaming(NamingStrategy.underline_to_camel);strategy.setColumnNaming(NamingStrategy.underline_to_camel);//strategy.setSuperEntityClass(&quot;com.baomidou.ant.common.BaseEntity&quot;);strategy.setEntityLombokModel(true);strategy.setRestControllerStyle(true);//strategy.setSuperControllerClass(&quot;com.baomidou.ant.common.BaseController&quot;);strategy.setInclude(scanner(&quot;表名&quot;));//strategy.setSuperEntityColumns(&quot;id&quot;);strategy.setControllerMappingHyphenStyle(true);strategy.setTablePrefix(&quot;_&quot;);mpg.setStrategy(strategy);mpg.setTemplateEngine(newFreemarkerTemplateEngine());mpg.execute();}}二、总结至此，mybatisplus的基础使用已经介绍完了，后面我将陆续为大家介绍她的高级用法，收藏一下吧！附：项目源码","link":"https://RookieXv.github.io/post/mybatis-plus-3/"},{"title":"（二）Mybatis-Plus的安装配置","content":"上一篇文章我们认识了Mybatis-Plus，这篇文章我们一起学习Mybatis-Plus在项目中怎么使用。项目结构如下：src├─main│├─java││└─com││└─example││└─mybatisplus││└─config│└─resources│├─static│└─templates└─test└─java└─com└─example└─mybatisplus一、安装全新的MyBatis-Plus3.0版本基于JDK8，提供了lambda形式的调用，所以安装集成MP3.0要求如下：JDK8+MavenJDK7以及下的请参考MP2.0版本官方文档，地址：2.0文档我们在该项目中集成了mybatis-plus，lombok，swagger，集体配置如下：#SpringBootMaven：&lt;properties&gt;&lt;java.version&gt;1.8&lt;/java.version&gt;&lt;spring-boot.version&gt;2.0.5.RELEASE&lt;/spring-boot.version&gt;&lt;mybatis-plus.version&gt;3.0-RELEASE&lt;/mybatis-plus.version&gt;&lt;swagger.version&gt;2.9.2&lt;/swagger.version&gt;&lt;lombok.version&gt;1.16.10&lt;/lombok.version&gt;&lt;/properties&gt;&lt;!--连接mysql--&gt;&lt;dependency&gt;&lt;groupId&gt;mysql&lt;/groupId&gt;&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;&lt;/dependency&gt;&lt;!--mybatis-plus--&gt;&lt;dependency&gt;&lt;groupId&gt;com.baomidou&lt;/groupId&gt;&lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;&lt;version&gt;${mybatis-plus.version}&lt;/version&gt;&lt;/dependency&gt;&lt;!--lombok--&gt;&lt;dependency&gt;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&lt;version&gt;${lombok.version}&lt;/version&gt;&lt;scope&gt;provided&lt;/scope&gt;&lt;/dependency&gt;&lt;!--swagger配置--&gt;&lt;dependency&gt;&lt;groupId&gt;io.springfox&lt;/groupId&gt;&lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;&lt;version&gt;${swagger.version}&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt;&lt;groupId&gt;io.springfox&lt;/groupId&gt;&lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;&lt;version&gt;${swagger.version}&lt;/version&gt;&lt;/dependency&gt;#SpringMVCMaven:&lt;!--mybatis-plus--&gt;&lt;dependency&gt;&lt;groupId&gt;com.baomidou&lt;/groupId&gt;&lt;artifactId&gt;mybatis-plus&lt;/artifactId&gt;&lt;version&gt;${mybatis-plus.version}&lt;/version&gt;&lt;/dependency&gt;&lt;!--连接mysql--&gt;&lt;dependency&gt;&lt;groupId&gt;mysql&lt;/groupId&gt;&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;&lt;/dependency&gt;&lt;!--lombok--&gt;&lt;dependency&gt;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&lt;version&gt;${lombok.version}&lt;/version&gt;&lt;scope&gt;provided&lt;/scope&gt;&lt;/dependency&gt;&lt;!--swagger配置--&gt;&lt;dependency&gt;&lt;groupId&gt;io.springfox&lt;/groupId&gt;&lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;&lt;version&gt;${swagger.version}&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt;&lt;groupId&gt;io.springfox&lt;/groupId&gt;&lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;&lt;version&gt;${swagger.version}&lt;/version&gt;&lt;/dependency&gt;引入MyBatis-Plus之后请不要再次引入MyBatis以及MyBatis-Spring，以避免因版本差异导致的问题。二、配置MyBatis-Plus的配置异常的简单，我们仅需要一些简单的配置即可使用MyBatis-Plus的强大功能。#SpringBoot配置MapperScan注解@SpringBootApplication@MapperScan(&quot;com.example.mybatis-plus.**.mapper&quot;)publicclassMybatisPlusApplication{publicstaticvoidmain(String[]args){SpringApplication.run(MybatisPlusApplication.class,args);}}配置application.ymlmybatis-plus:#xml地址mapper-locations:classpath*:mapper/*/*Mapper.xml#实体扫描，多个package用逗号或者分号分隔#自己的实体类地址type-aliases-package:com.example.mybatis-plusconfiguration:#这个配置会将执行的sql打印出来，在开发或测试的时候可以用log-impl:org.apache.ibatis.logging.stdout.StdOutImpl#开启驼峰命名法map-underscore-to-camel-case:true#SpringMVC配置MapperScan&lt;beanclass=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;&lt;propertyname=&quot;basePackage&quot;value=&quot;com.baomidou.mybatisplus.samples.quickstart.mapper&quot;/&gt;&lt;/bean&gt;调整SqlSessionFactory为MyBatis-Plus的SqlSessionFactory&lt;beanid=&quot;sqlSessionFactory&quot;class=&quot;com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean&quot;&gt;&lt;propertyname=&quot;dataSource&quot;ref=&quot;dataSource&quot;/&gt;&lt;/bean&gt;通常来说，一般的简单工程，通过以上配置即可正常使用MyBatis-Plus。#swagger配置packagecom.example.mybatisplus.config;importorg.springframework.context.annotation.Bean;importorg.springframework.context.annotation.Configuration;importspringfox.documentation.builders.ApiInfoBuilder;importspringfox.documentation.builders.PathSelectors;importspringfox.documentation.builders.RequestHandlerSelectors;importspringfox.documentation.service.ApiInfo;importspringfox.documentation.service.Contact;importspringfox.documentation.spi.DocumentationType;importspringfox.documentation.spring.web.plugins.Docket;importspringfox.documentation.swagger2.annotations.EnableSwagger2;/***Copyright(C),2016-2019,Mobius-Vision*FileName:SwaggerConfig*Author:liuwenxu*Date:2019/7/1014:59*Description:接口文档说明http://localhost:8089/swagger-ui.html#/*/@Configuration@EnableSwagger2publicclassSwaggerConfig{@BeanpublicDocketcreateRestApi(){returnnewDocket(DocumentationType.SWAGGER_2).apiInfo(apiInfo()).select().apis(RequestHandlerSelectors.basePackage(&quot;com.example.mybatis-plus.controller&quot;)).paths(PathSelectors.any()).build();}privateApiInfoapiInfo(){returnnewApiInfoBuilder().title(&quot;mybatis-plus&quot;).description(&quot;mybatis-plus&quot;).contact(newContact(&quot;liuwenxu&quot;,&quot;&quot;,&quot;&quot;)).version(&quot;2.0&quot;).build();}}","link":"https://RookieXv.github.io/post/er-mybatis-plus-de-an-zhuang-pei-zhi/"},{"title":"（一）初识Mybatis-Plus","content":"mybatis-plus愿景：我们的愿景是成为MyBatis最好的搭档，就像魂斗罗中的1P、2P，基友搭配，效率翻倍。前言：mybatis在持久层框架中还是比较火的，使用也很方便。虽然mybatis可以直接在xml中通过SQL语句操作数据库，很是灵活。但正其操作都要通过SQL语句进行，就必须写大量的xml文件，很是麻烦。**mybatis-plus**就很好的解决了这个问题。一、mybatis-plus简介：Mybatis-Plus（简称MP）是一个Mybatis的增强工具，在Mybatis的基础上只做增强不做改变，为简化开发、提高效率而生。这是官方给的定义，关于mybatis-plus的更多介绍及特性，可以参考mybatis-plus官网。那么它是如何增强的呢？其实就是它已经封装好了一些crud方法，我们不需要再写xml了，直接调用这些方法就行，就类似于JPA。二、特性无侵入：只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑损耗小：启动即会自动注入基本CURD，性能基本无损耗，直接面向对象操作强大的CRUD操作：内置通用Mapper、通用Service，仅仅通过少量配置即可实现单表大部分CRUD操作，更有强大的条件构造器，满足各类使用需求支持Lambda形式调用：通过Lambda表达式，方便的编写各类查询条件，无需再担心字段写错支持主键自动生成：支持多达4种主键策略（内含分布式唯一ID生成器-Sequence），可自由配置，完美解决主键问题支持ActiveRecord模式：支持ActiveRecord形式调用，实体类只需继承Model类即可进行强大的CRUD操作支持自定义全局通用操作：支持全局通用方法注入（Writeonce,useanywhere）内置代码生成器：采用代码或者Maven插件可快速生成Mapper、Model、Service、Controller层代码，支持模板引擎，更有超多自定义配置等您来使用内置分页插件：基于MyBatis物理分页，开发者无需关心具体操作，配置好插件之后，写分页等同于普通List查询分页插件支持多种数据库：支持MySQL、MariaDB、Oracle、DB2、H2、HSQL、SQLite、Postgre、SQLServer2005、SQLServer等多种数据库内置性能分析插件：可输出Sql语句以及其执行时间，建议开发测试时启用该功能，能快速揪出慢查询内置全局拦截插件：提供全表delete、update操作智能分析阻断，也可自定义拦截规则，预防误操作三、框架结构官网：https://mybatis.plus接下来我们来看看在项目中具体怎么使用~","link":"https://RookieXv.github.io/post/mybatis-plus-1/"},{"title":"Hello Gridea","content":"👏欢迎使用Gridea！✍️Gridea一个静态博客写作客户端。你可以用它来记录你的生活、心情、知识、笔记、创意......GithubGridea主页示例网站特性👇📝你可以使用最酷的Markdown语法，进行快速创作🌉你可以给文章配上精美的封面图和在文章任意位置插入图片🏷️你可以对文章进行标签分组📋你可以自定义菜单，甚至可以创建外部链接菜单💻你可以在Windows，MacOS或Linux设备上使用此客户端🌎你可以使用𝖦𝗂𝗍𝗁𝗎𝖻𝖯𝖺𝗀𝖾𝗌或CodingPages向世界展示，未来将支持更多平台💬你可以进行简单的配置，接入Gitalk或DisqusJS评论系统🇬🇧你可以使用中文简体或英语🌁你可以任意使用应用内默认主题或任意第三方主题，强大的主题自定义能力🖥你可以自定义源文件夹，利用OneDrive、百度网盘、iCloud、Dropbox等进行多设备同步🌱当然Gridea还很年轻，有很多不足，但请相信，它会不停向前🏃未来，它一定会成为你离不开的伙伴尽情发挥你的才华吧！😘Enjoy~","link":"https://RookieXv.github.io/post/hello-gridea/"}]}